<ng-container *ngIf="loadingState$ | async as state">
  <ng-container [ngSwitch]="state | loadingStateTemplate: showStaleData">
    <ngx-data-loader-error
      *ngSwitchCase="'error'"
      [error]="state.error"
      [errorTemplate]="errorTemplate"
      (reload)="reload()"
    ></ngx-data-loader-error>

    <ngx-data-loader-data
      *ngSwitchCase="'data'"
      [data]="state.data"
      [loading]="state.loading"
      [dataTemplate]="dataTemplate"
      [showStaleData]="showStaleData"
    ></ngx-data-loader-data>

    <ngx-data-loader-skeleton
      *ngSwitchCase="'skeleton'"
      [skeletonDelay]="skeletonDelay"
      [skeletonTemplate]="skeletonTemplate"
    ></ngx-data-loader-skeleton>
  </ng-container>
</ng-container>
