<ng-container *ngIf="loadingState$ | async as state">
  <ng-container [ngSwitch]="state | loadingStateTemplate">
    <lib-error
      *ngSwitchCase="'error'"
      [error]="state.error"
      [errorTemplate]="errorTemplate"
      (reload)="reload()"
    ></lib-error>

    <lib-data
      *ngSwitchCase="'data'"
      [data]="state.data"
      [loading]="state.loading"
      [dataTemplate]="dataTemplate"
      [showStaleData]="showStaleData"
    ></lib-data>

    <lib-skeleton
      *ngSwitchCase="'skeleton'"
      [skeletonDelay]="skeletonDelay"
      [skeletonTemplate]="skeletonTemplate"
    ></lib-skeleton>
  </ng-container>
</ng-container>
